# Architecture Documentation

AgentStats is designed with performance and scalability in mind. Below are the core architectural patterns used in the project.

## ğŸ”— Unified Single-Port Architecture

The project follows a **Unified Single-Port** design. In production, the Express 5 server serves both the REST API and the static assets generated by the Vite build process.
- **Port**: `14514`
- **Benefits**: Simplifies SSL termination, eliminates CORS issues, and reduces deployment complexity.

## ğŸ—ï¸ Worker-Based Scoring Mechanism

To ensure the user interface remains responsive while performing heavy calculations, AgentStats offloads its scoring logic to background threads.
- **Scoring Worker**: Complex Qwen-specific scoring algorithms are executed in `client/src/workers/scoring.worker.js`.
- **Mechanism**: Data is passed via `postMessage` to the worker, which performs intensive arithmetic and returns normalized scores without blocking the main event loop.

## ğŸï¸ Predictive Prefetch Pattern

We implement a **Predictive Prefetch** pattern to achieve our "Zero-Latency UX" goal.
- **Logic**: The application utilizes the `usePredictivePrefetch` hook to anticipate user navigation.
- **Execution**: By monitoring mouse intent and interaction history, the system fetches data for anticipated routes in the background. When the user eventually clicks, the data is already available in the local cache, leading to instantaneous updates.
